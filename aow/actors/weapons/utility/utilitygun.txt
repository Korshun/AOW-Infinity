// UTILITY GUN
Actor MenuSelection : Inventory {Inventory.MaxAmount 3}
Actor MenuSelection2 : Inventory {Inventory.MaxAmount 10}
Actor MenuHorPos : Inventory {Inventory.MaxAmount 1}
Actor GotAdvTurrets : Inventory {Inventory.MaxAmount 1}
Actor GotMoreTurrets : Inventory {Inventory.MaxAmount 1}
Actor CannotBuild : Inventory {Inventory.MaxAmount 1}
Actor InUtilMenu : Inventory {Inventory.MaxAmount 1}
Actor NoMechs : Inventory {Inventory.MaxAmount 1}
Actor PortalsEnabled : Inventory {Inventory.MaxAmount 1}

Actor UtilityGun : AOWWeapon {
	Inventory.PickupSound "misc/w_pkup"
	DropItem "EngineerPack"
	Weapon.AmmoType "Utility_Ammo"
	Weapon.AmmoUse 0
	Weapon.AmmoType2 "Utility_Percent"
	Weapon.AmmoUse2 0
	Weapon.Kickback 0
	Weapon.PreferredSkin "MarineBFG10k"

	States
	{
	Spawn:
		NULL A 0 
		Stop
	RejectedWait:
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 20
		Goto Ready
	Ready:
		NULL A 0 A_StopSoundEx("Weapon")
		NULL A 0 ACS_ExecuteAlways(aow_script370, 0)
		NULL A 0 A_TakeInventory("Utility_Percent", 2)
		NULL A 0 A_GiveInventory("Utility_Ammo", 2)
		UTIG A 20 A_WeaponReady
		Loop
	Deselect:
		NULL A 0 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_JumpIfHealthLower(1, 2)
		NULL A 0 A_JumpIfInventory("InUtilMenu", 1, "Ready")
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 1 A_Lower
		Wait
	Select:
		UTIG A 1 A_Raise
		Loop
	Fire:
		NULL A 0 A_JumpIfInventory("CannotBuild", 1, "RejectedWait")
		NULL A 0 ACS_ExecuteAlways(aow_script370, 0)
		NULL A 0 A_PlaySoundEx("utility/work", "Weapon", 1)
		NULL A 0 A_JumpIfInventory("MenuSelection", 3, "Fire.Geometry")
		NULL A 0 A_JumpIfInventory("MenuSelection", 2, "Fire.Defenses")
		NULL A 0 A_JumpIfInventory("MenuSelection", 1, "Fire.Pickups")
		Goto Fire.Caches
	Fire.Caches:
		NULL A 0 A_JumpIfInventory("MenuSelection2", 6, "Create.PowerGenerator")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 5, "Create.RegenAmmo")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 4, "Create.Regen")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 3, "Create.MiniRef")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 2, "Create.SuperCache")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 1, "Create.MedicalCache")
		Goto Create.AmmoCache
	Fire.Pickups:
		NULL A 0 A_JumpIfInventory("MenuSelection2", 7, "Create.WolfMech")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 6, "Create.RavenMech")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 5, "Create.ChemProof")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 4, "Create.FireProof")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 3, "Create.MachineGun")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 2, "Create.Rifle")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 1, "Create.FullRefill")
		Goto Create.C4Box
	Fire.Defenses:
		NULL A 0 A_JumpIfInventory("MenuSelection2", 7, "Create.ArtilleryTurret")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 6, "Create.RepairTurret")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 5, "Create.PrecisionTurret")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 4, "Create.KlaxonTurret")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 3, "Create.MiniRaven")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 2, "Create.Mines")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 1, "Create.MechTurret")
		Goto Create.GunTurret
	Fire.Geometry:
		NULL A 0 A_JumpIfInventory("MenuSelection2", 9, "Create.StepDown3")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 8, "Create.StepStraight3")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 7, "Create.Step3")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 6, "Create.StepDown")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 5, "Create.StepStraight")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 4, "Create.Step")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 3, "Create.Platform")
		//NULL A 0 A_JumpIfInventory("MenuSelection2", 3, "Create.Barrel")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 2, "Create.Portal")
		NULL A 0 A_JumpIfInventory("MenuSelection2", 1, "Create.Sandbags")
		Goto Create.RazorWire
	Create.C4Box:
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.C4Box")
		NULL A 0 Radius_Quake (1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 4, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 4)
		NULL A 0 A_SpawnItemEx("Utility_C4BoxMarker", 64, 0, 32)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 6)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.C4Box:
		NULL A 0 A_SpawnItemEx("Utility_C4BoxMarker", 64, 0, 32)
		NULL A 0 A_SpawnItemEx("C4Box", 64, 0, 32)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.FullRefill:
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.FullRefill")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 4, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 4)
		NULL A 0 A_SpawnItemEx("Utility_FullRefillMarker", 64, 0, 32)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 5)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.FullRefill:
		NULL A 0 A_SpawnItemEx("Utility_FullRefillMarker", 64, 0, 32)
		NULL A 0 A_SpawnItemEx("FullRefillPack", 64, 0, 32)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.Rifle:
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Rifle")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 2, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 2)
		NULL A 0 A_SpawnItemEx("Utility_RifleMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 8)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Rifle:
		NULL A 0 A_SpawnItemEx("Utility_RifleMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Rifle", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.MedicalCache:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.MedicalCache")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 4, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 4)
		NULL A 0 A_SpawnItemEx("Utility_MedicalCacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 6)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.MedicalCache:
		NULL A 0 A_SpawnItemEx("Utility_MedicalCacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("MedicalCache", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.AmmoCache:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.AmmoCache")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 4, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 4)
		NULL A 0 A_SpawnItemEx("Utility_AmmoCacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 6)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.AmmoCache:
		NULL A 0 A_SpawnItemEx("Utility_AmmoCacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("AmmoCache", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.MachineGun:
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.MachineGun")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_MachineGunMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 6)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.MachineGun:
		NULL A 0 A_SpawnItemEx("Utility_MachineGunMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("MachineGun", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.SuperCache:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.SuperCache")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 5, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 5)
		NULL A 0 A_SpawnItemEx("Utility_SuperCacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 5)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.SuperCache:
		NULL A 0 A_SpawnItemEx("Utility_SuperCacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("SuperCache", 96)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.RazorWire:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.RazorWire")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_RazorWireMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 6)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.RazorWire:
		NULL A 0 A_SpawnItemEx("Utility_RazorWireMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.RazorWireBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 1, 0, 0) == 0, "Limit")
		NULL A 0 A_SpawnItemEx("Utility_RazorWire", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 1, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.RazorWireBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 1, 1, 0) == 0, "Limit")
		NULL A 0 A_SpawnItemEx("Utility_RazorWireBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 1, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.Sandbags:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Sandbags")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_SandbagsMarker", 96, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 7)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Sandbags:
		NULL A 0 A_SpawnItemEx("Utility_SandbagsMarker", 96, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("SandbagWall", 96, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.GunTurret:
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.GunTurret")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.GunTurret:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.GunTurretBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 0, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 0, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_GunTurretRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.GunTurretBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 0, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 0, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_GunTurretBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.MechTurret:
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.MechTurret")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.MechTurret:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.MechTurretBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 3, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MechTurretRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.MechTurretBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 3, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MechTurretBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.Step:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Step")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 5, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 5)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 35)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Step:
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.StepDown:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.StepDown")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 5, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 5)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -28, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 35)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.StepDown:
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -28, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 64, 0, -28, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.StepStraight:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.StepStraight")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 5, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 5)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -12, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 35)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.StepStraight:
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 64, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.Step3:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Step3")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 10, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 10)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 96, 0, 12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 128, 0, 24, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 35)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Step3:
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 96, 0, 12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 128, 0, 24, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 96, 0, 12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 128, 0, 24, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.StepDown3:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.StepDown3")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 10, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 10)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -28, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 96, 0, -40, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 128, 0, -52, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 35)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.StepDown3:
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -28, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 96, 0, -40, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 128, 0, -52, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 64, 0, -28, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 96, 0, -40, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 128, 0, -52, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.StepStraight3:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.StepStraight3")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 10, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 10)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 96, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 128, 0, -12, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 35)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.StepStraight3:
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 64, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 96, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_StepMarker", 128, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 64, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 96, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Step", 128, 0, -12, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// MINIREF
	Create.MiniRef:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.MiniRef")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 2, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 2)
		NULL A 0 A_SpawnItemEx("Utility_MiniRefCacheMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 1)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.MiniRef:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.MiniRefBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 3, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 2, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 3, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_MiniRefCacheMarker", 128, 0, 0, 0, 0, 0, 0, 32)
		NULL A 0 A_SpawnItemEx("Utility_MiniRefCacheRed", 128)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.MiniRefBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 3, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 2, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 3, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_MiniRefCacheMarker", 128, 0, 0, 0, 0, 0, 0, 32)
		NULL A 0 A_SpawnItemEx("Utility_MiniRefCacheBlue", 128)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// Health REGENERATOR
	Create.Regen:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Regen")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 2, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 2)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 1)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Regen:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.RegenBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 4, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 7, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 6, 1, 0)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_GlobalMedicCacheRed", 96, 0, 0, 0, 0, 0, 0, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.RegenBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 4, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 7, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 6, 1, 0)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_GlobalMedicCacheBlue", 96, 0, 0, 0, 0, 0, 0, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// Ammo REGENERATOR
	Create.RegenAmmo:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.RegenAmmo")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 2, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 2)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 1)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.RegenAmmo:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.RegenAmmoBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 6, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 7, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 8, 1, 0)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_GlobalAmmoCacheRed", 96, 0, 0, 0, 0, 0, 0, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.RegenAmmoBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 6, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 7, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 8, 1, 0)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_GlobalAmmoCacheBlue", 96, 0, 0, 0, 0, 0, 0, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// MINES
	Create.Mines:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Mines")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, -32, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, 32, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Mines:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.MinesBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 2, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 4, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 5, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, -32, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, 32, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("ProxyMineRed", 64, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineRed", 96, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineRed", 128, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineRed", 96, -32, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineRed", 96, 32, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.MinesBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 2, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 4, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 5, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 64, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, -32, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MinesMarker", 96, 32, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("ProxyMineBlue", 64, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineBlue", 96, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineBlue", 128, 0, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineBlue", 96, -32, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("ProxyMineBlue", 96, 32, 0, 0, 0, 0, 0, SXF_SETMASTER|SXF_NOCHECKPOSITION)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// REPAIR TURRET
	Create.RepairTurret:
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script971, 0) == 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("HasClass", 1, 1)
		Goto Ready
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.RepairTurret")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.RepairTurret:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.RepairTurretBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 5, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_RepairGunTurretRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.RepairTurretBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 5, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_RepairGunTurretBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// KLAXON TURRET
	Create.KlaxonTurret:
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script971, 0) == 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.KlaxonTurret")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.KlaxonTurret:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.KlaxonTurretBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 6, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_KlaxonRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.KlaxonTurretBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 6, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_KlaxonBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// FIREPROOF
	Create.FireProof:
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.FireProof")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_ArmourMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 4)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.FireProof:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 6, 0, 0) == 0, "EndFire2")
		NULL A 0 A_SpawnItemEx("Utility_ArmourMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("FireArmor", 64, 0, 32)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// CHEMPROOF
	Create.ChemProof:
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.ChemProof")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_ArmourMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 4)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.ChemProof:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 6, 0, 0) == 0, "EndFire2")
		NULL A 0 A_SpawnItemEx("Utility_ArmourMarker", 64, 0, 32, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("ChemicalArmor", 64, 0, 32)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// RAVEN
	Create.RavenMech:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.RavenMech")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_RavenMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 2)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.RavenMech:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 8, 0, 0) == 0, "EndFire2")
		NULL A 0 A_SpawnItemEx("Utility_RavenMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_Raven", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// WOLVERINE
	Create.WolfMech:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.WolfMech")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_WolfMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 2)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.WolfMech:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 11, 0, 0) == 0, "EndFire2")
		NULL A 0 A_SpawnItemEx("Utility_WolfMarker", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_Wolverine", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// RIFLE/PRECISION TURRET
	Create.PrecisionTurret:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script971, 0) == 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.PrecisionTurret")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.PrecisionTurret:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.PrecisionTurretBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 5, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PrecisionTurretRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.PrecisionTurretBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 5, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 4, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_TurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PrecisionTurretBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// ANNOYING NOSY EVERYWHERE FOLLOWING BIRDIE
	Create.MiniRaven:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.MiniRaven")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_MiniRavenMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 3)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.MiniRaven:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.MiniRavenBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 5, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 9, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 7, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_MiniRavenMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MiniRavenRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.MiniRavenBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 5, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 9, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 7, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_MiniRavenMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_MiniRavenBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Create.ArtilleryTurret:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("UtilityOutOfRange", 1, "RejectedWait")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script971, 0) == 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.ArtilleryTurret")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_ArtilleryTurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 10)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.ArtilleryTurret:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.ArtilleryTurretBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 10, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 9, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_ArtilleryTurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_ArtilleryTurretRed", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.ArtilleryTurretBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 0, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 10, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 9, 0, 0)
		NULL A 0 A_SpawnItemEx("Utility_ArtilleryTurretMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_ArtilleryTurretBlue", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// POWER GENERATOR
	Create.PowerGenerator:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.PowerGenerator")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 2, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 2)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 1)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.PowerGenerator:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.PowerGeneratorBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 20, 0, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 7, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 20)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PowerGeneratorRed", 96, 0, 0, 0, 0, 0, 0, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.PowerGeneratorBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 20, 1, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script695, 7, 0, 0) == 0, "EndFire2")
		NULL A 0 ACS_ExecuteAlways(aow_script344, 0, 20)
		NULL A 0 A_SpawnItemEx("Utility_CacheMarker", 96, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PowerGeneratorBlue", 96, 0, 0, 0, 0, 0, 0, 0, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// PLATFORM
	Create.Platform:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Platform")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 2, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 2)
		NULL A 0 A_SpawnItemEx("Utility_PlatformMarker", 128)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 3)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Platform:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script694, 150, 0, 0) == 0, "EndFire2")
		NULL A 0 A_SpawnItemEx("Utility_PlatformMarker", 128)
		NULL A 0 A_SpawnItemEx("FloatingPlatform", 128)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	// PORTAL
	Create.Portal:
		NULL A 0 A_JumpIfInventory("IsInSpawnRoom", 1, "RejectedWait")
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Portal")
		NULL A 0 Radius_Quake(1, 4, 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_PortalStandMarker", 128, 80, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalStandMarker", 128, -80, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalSphereMarker", 128, 80, 56, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalSphereMarker", 128, -80, 56, 0, 0, 0, 0, 32, 0)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 3)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Portal:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_isblueteam, 0, 0, 0) == 1, "Done.PortalBlue")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 21, 1) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script694, 250) == 0, "EndFire2")
		UTIF A 2 ACS_ExecuteAlways(aow_portal_init, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalStandMarker", 128, 80, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalStandMarker", 128, -80, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalSphereMarker", 128, 80, 56, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalSphereMarker", 128, -80, 56, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalRed", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	Done.PortalBlue:
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script346, 21, 0) == 0, "Limit")
		NULL A 0 A_JumpIf(ACS_ExecuteWithResult(aow_script694, 250) == 0, "EndFire2")
		UTIF A 2 ACS_ExecuteAlways(aow_portal_init, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalStandMarker", 128, 80, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalStandMarker", 128, -80, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalSphereMarker", 128, 80, 56, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalSphereMarker", 128, -80, 56, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_SpawnItemEx("Utility_PortalBlue", 128, 0, 0, 0, 0, 0, 0, 32, 0)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake(1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire
	/*Create.Barrel:
		Goto Ready
		NULL A 0 A_JumpIfInventory("Utility_Percent", 100, "Done.Barrel")
		NULL A 0 Radius_Quake (1 , 4 , 0, 1, 0)
		NULL A 0 A_JumpIfInventory("Utility_Ammo", 3, 1)
		Goto EndFire
		NULL A 0 A_TakeInventory("Utility_Ammo", 3)
		NULL A 0 A_SpawnItemEx("Utility_BarrelMarker", 96, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		UTIF A 10 BRIGHT A_GiveInventory("Utility_Percent", 8)
		UTIG A 15
		NULL A 0 A_Refire
		Goto EndFire
	Done.Barrel:
		NULL A 0 A_SpawnItemEx("Utility_BarrelMarker", 96, 0, 0, 0, 0, 0, 0, SXF_NOCHECKPOSITION)
		NULL A 0 A_SpawnItemEx("Utility_Barrel", 96)
		NULL A 0 A_StopSoundEx("Weapon")
		UTIG A 35 BRIGHT Radius_Quake (1, 4, 0, 1, 0)
		UTIG A 35 A_TakeInventory("Utility_Percent", 100)
		NULL A 0 A_Refire
		Goto EndFire*/
	EndFire:
		UTIG A 15 A_StopSoundEx("Weapon")
		Goto Ready
	EndFire2:
		NULL A 0 ACS_ExecuteAlways(aow_script347, 0, 1)
		UTIG A 35 A_StopSoundEx("Weapon")
		Goto Ready
	Limit:
		UTIG A 35 ACS_ExecuteAlways(aow_script347, 0)
		Goto EndFire
	AltFire:
		NULL A 0 A_JumpIfInventory("InUtilMenu", 1, "AltRejected")
		UTIG A 4
		NULL A 0 ACS_ExecuteAlways(aow_script970, 0)
		UTIG A 35
		Goto Ready
	AltRejected:
		// this should happen if the Player is coming out of the util menu
		// therefore, longer delay to avoid altfire activating again to
		// throw the Player back to the menu
		UTIG A 10
		UTIG A 20 A_WeaponReady(WRF_NOSECONDARY)
		Goto Ready
	}
}

Actor Utility_Percent : Ammo {
	Inventory.amount 0
	Inventory.MaxAmount 100
	Ammo.BackpackAmount 0
	Ammo.BackpackMaxAmount 0
}

Actor Utility_Ammo : Ammo {
	Inventory.icon "CELLA0"	
	Inventory.amount 75
	Inventory.MaxAmount 75
	Ammo.BackpackAmount 75
	Ammo.BackpackMaxAmount 75
	
	States
	{
	Spawn:
		NULL A 0
		Stop
	}
}

Actor Utility_TurretBase {
	DamageFactor "Disarm", 0.0
	DamageFactor "RazorWire", 0.0
	DamageFactor "RazorWire", 0.0
	DamageFactor "Fist", 0.5
	DamageFactor "Fist", 0.5
	DamageFactor "Mechstomp", 0.0
	DamageFactor "Explosion", 1.5
	DamageFactor "Explosion", 1.5
	DamageFactor "ExplosionMech", 2.5
	DamageFactor "ExplosionMech", 2.5
	DamageFactor "Fire", 0.6
	DamageFactor "Fire", 0.6
	DamageFactor "Chemical", 0.6
	DamageFactor "Chemical", 0.6
	PainChance "Laser", 255
	PainChance "Laser", 255
	Radius 24
	Height 56
	Scale 0.75
	Mass 0x7FFFFFFF
	Speed 0

	MONSTER
	+FLOORCLIP
	+NOBLOOD
	+NOICEDEATH
	-SOLID
	-COUNTKILL
	-FRIENDLY
	+NOTARGET
	+LOOKALLAROUND
	+NEVERRESPAWN
	
	States
	{
	Death.Deconstruction:
		"----" A 2 A_PlaySound("utility/deconstruct")
		"----" AAAAAAAAAA 2 A_Fadeout(0.1)
		Stop
	}
}

// [NF] This Actor is used to clear places like War Factory hangar doors, teleport
// destinations and the like from utility items
Actor AntiUtilityExplosion {
	+NOGRAVITY +NOBLOCKMAP
	+NOINTERACTION +NODAMAGETHRUST
	+BLOODLESSIMPACT
	DamageType "Deconstruction"
	States
	{
	Spawn:
		NULL A 0
		NULL A 0 A_Explode(999999, 96)
		Stop
	}
}

Actor PowerupCacheMapSpawned 21490 {
	States
	{
	Spawn:
		NULL A 0
		Stop
	}
}